define ("qtype_digitalliteracy/coefficientchange",function(){var g=[];function a(a){if(!document.getElementById("id_responseformat")){return}g=a;for(var b=0;b<g.length;b++){(function(){var a=g[b],d=document.getElementById(a);d.addEventListener("input",function(){c(d,a,!1)});c(d,a,!0);d.addEventListener("dblclick",function(){if(0!==d.placeholder.length){d.value=d.placeholder}d.dispatchEvent(new CustomEvent("update"))})})()}}function b(a,b){this.id=a;this.placeHolder=0===b.length;this.value=this.placeHolder?0:parseInt(b)}b.prototype.toString=function(){return this.id+" : "+this.value};function c(a,b,c){var h=a.value.toString().replace(/[^0-9]/g,"");if(0!==h.length){var j=parseInt(h,10);if(100<j){j=100}a.value=j;a.placeholder=""}else{a.value=""}for(var k=0,l=[],m=0;m<g.length;m++){var n=g[m],o=document.getElementById(n);if(!o.hidden){l.push(n);k+=0===o.value.length?0:parseInt(o.value,10)}}if(100>=k){d(k,l)}else{e(k,b,l)}if(!c){f()}}function d(a,c){var d,e=[];for(d=0;d<c.length;d++){var f=c[d],g=new b(f,document.getElementById(f).value);if(g.placeHolder){e.push(g)}}if(0===e.length){return}a=100-a;var h=Math.floor(a/e.length);for(d=0;d<e.length;d++){e[d].value=h;a-=h}if(1<e.length&&0!==a){for(var j=0;0!==a;a--){e[j].value++;j=j+1===e.length?0:j+1}}for(d=0;d<e.length;d++){var k=e[d];document.getElementById(k.id).placeholder=k.value}}function e(a,c,d){var e,f,g=[];a-=100;for(f=0;f<d.length;f++){var h=d[f],j=new b(h,document.getElementById(h).value);if(0!==j.value&&h!==c){g.push(j)}}var k=Math.floor(a/g.length);for(f=0;f<g.length;f++){e=g[f];if(0<=e.value-k){e.value-=k;a-=k}else{a-=e.value;e.value=0}}if(1<g.length&&0!==a){g.sort(function(c,a){return a.value-c.value});while(0!=a--){var l=g.shift();l.value--;var m=0;for(f=0;f<g.length;f++){if(g[f]<=l.value){m=f;break}}g.splice(m,0,l)}}for(f=0;f<g.length;f++){e=g[f];document.getElementById(e.id).value=e.value}}function f(){for(var a=0;a<g.length;a++){document.getElementById(g[a]).dispatchEvent(new CustomEvent("update"))}}return{process:a}});
//# sourceMappingURL=coefficientchange.min.js.map
