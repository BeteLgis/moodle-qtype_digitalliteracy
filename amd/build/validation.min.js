define(function(){var d,o={},n={},u={},c={},l={},a=0,i=null;function f(e,n,t){e=function(e){e=e.replace(/[^0-9]/g,"");if(0===e.length)return-1;e=parseInt(e,10);return 0<=e&&e<=100?e:-1}(e);c[n]=e,m(n),l[n].coef=e<0?"validatecoef":"";var r,e=Object.values(c),d=!e.includes(-1)&&100!==e.reduce(function(e,n){return e+n},0);for(r in c)0<=c[r]&&(l[r].coef=d?"notahundred":""),t||s(r)}function s(e){var n,t=[],r=l[e];for(n in r)"params"===n&&0===c[e]||0!==r[n].toString().length&&t.push(o[r[n]]);var d=202e7<a?document.getElementById("fgroup_id_error_"+e):document.getElementById("id_error_"+e),i=t.join(" | ");0===i.length?(d.innerText="",d.style.display=""):(d.innerText=i,d.style.display="block")}function h(e,n,t,r,d){if(u[r][t].hidden=e,u[r][t].checked=n,!(o=!e&&n)){for(var i,o,c=e?1:0,a=u[r],f=0;!o&&f<a.length;f++)f!==t&&(o=!(i=a[f]).hidden&&i.checked,i.hidden&&c++);o=o||c===a.length}l[r].params=o?"":"tickacheckbox",m(r),d||s(r)}function m(e){var n=0<c[e]&&0===l[e].params.length;"group2"===e&&(e=i,n?(e.hidden=!1,e.style.display=""):(e.hidden=!0,e.style.display="none"))}return{process:function(e){if(document.getElementById("id_responseformat")){var t,r;for(t in o=e.errors,d=e.coefs_map,n=e.params_map,i=document.getElementById("fitem_id_fontparams"),d)r=d[t],c[r]=0,l[r]={coef:"",params:""};for(r in n)u[r]=[],n[r].forEach(function(e,n){u[r][n]={hidden:!1,checked:!1}});for(t in d)!function(){var e=d[t],n=document.getElementById("id_"+t);n.addEventListener("update",function(){f(n.value.toString(),e,!1)}),f(n.value.toString(),e,!0)}();for(r in n)!function(r){n[r].forEach(function(e,n){var t=document.getElementById("id_"+e);t.addEventListener("change",function(){h(t.hidden,t.checked,n,r,!1)}),h(t.hidden,t.checked,n,r,!0)})}(r)}}}});