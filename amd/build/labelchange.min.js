define ("qtype_digitalliteracy/labelchange",function(){var j={parse:function(a){var h=0,i=[null],j=function(b,c){c=c||h;throw new Error("Error at "+c+": "+b+"\n"+a+"\n"+" ".repeat(c)+"^")},k=function(b,c){return b===a.slice(h,h+=b.length)?c:j("Expected '"+b+"'",h-b.length)};function b(b,c,d){d=d||";";k(":");var e=b.exec(a.slice(h));if(!e){j("Expected "+c+", but got '"+a.slice(h).match(/^[:;{}]|[^:;{}]*/)[0]+"'")}h+=e[0].length;return k(d,e[0])}function c(b,c){c=c||"";var d=h;while(0<b){var e=a.charCodeAt(h++);b-=128>e?1:2048>e||27==e>>11?2:3}return b?j("Invalid string length",d-2):k(c,a.slice(d,h))}var l=function(a){return+b(/^\d+/,"an unsigned integer",a)},m=function(a){a=a||"";return c(l(":\""),"\""+a)};function d(){var b=a[h++];return"s"===b?m(";"):"i"===b?l(";"):j("Expected 's' or 'i' as type for a key, but got ${str[offset-1]}",h-1)}function e(a){for(var b=0,c=l(":{");b<c;b++){a[d()]=g()}return k("}",a)}function f(){var a=e({});return Object.keys(a).some(function(a,b){return a!==b.toString()})?a:Object.values(a)}function g(){var b=a[h++].toLowerCase(),c=i.push(null)-1,d="s"===b?m(";"):"a"===b?f():j("Unexpected type "+b,h-1);if("r"!==b){i[c]=d}return d}var n=g();if(h!==a.length){j("Unexpected trailing character")}return n}},k=[],l=[],m={},n={},o=null,p=null,q={};function a(a){if(!document.getElementById("id_responseformat")){return}k=a.params;l=a.groups;m=a.types.matches;n=a.types.defaults;o=document.getElementById("id_responseformat");p=document.getElementById("id_filetypeslist");p.setAttribute("readonly","true");var d=document.getElementById("id_labels_container"),e=d.getAttribute("data-serialized");q=j.parse(e);d.remove();console.log(Object.keys(q).length+" labels were successfully parsed, container was removed");var f,g,r;for(f=0;f<k.length;f++){g="id_"+k[f];r=document.getElementById(g).parentElement;b(r,g+"_label_span","id")}for(f=0;f<l.length;f++){g="fgroup_id_"+l[f];r=document.getElementById(g+"_label");b(r,g+"_label_span","id");var s=document.getElementById(g),t=s.children.item(0).children.item(0).children.item(0);t.id=g+"_help_text";var u=t.children.item(0);u.id=g+"_help_title"}o.addEventListener("change",function(){c(!1)});c(!0);h()}function b(a,b,c){a.normalize();var d="",e=Array.from(a.childNodes).find(function(a){if(a.nodeType===Node.TEXT_NODE){d="string"==typeof a.textContent?a.textContent:a.innerText;return""!==d.trim()}return!1});if(!e){console.log("TextNode not found, label id "+a.id);return}var f=document.createElement("span");f.appendChild(document.createTextNode(d));f[c]=b;a.replaceChild(f,e)}function c(a){var b,c,f,g=o.options[o.selectedIndex].value;for(b=0;b<k.length;b++){var h=k[b];c=document.getElementById("id_"+h+"_label_span");f=document.getElementById("id_"+h);d(c,f,f.parentElement,q[h+"_"+g]);f.dispatchEvent(new CustomEvent("change"))}for(b=0;b<l.length;b++){var j=l[b];c=document.getElementById("fgroup_id_"+j+"_label_span");f=document.getElementById("fgroup_id_"+j);var m=q[j+"_"+g];if(!d(c,f,f,m)){var n=document.getElementById("fgroup_id_"+j+"_help_title");n.setAttribute("title",q[j+"_help_title_"+g]);n.setAttribute("aria-label",q[j+"_help_title_"+g]);var p=document.getElementById("fgroup_id_"+j+"_help_text");p.setAttribute("data-content",q[j+"_help_text_"+g])}var r=document.getElementById("id_"+j+"coef");if(d(null,r,r.parentElement.parentElement,m)){r.value=0}r.dispatchEvent(new CustomEvent("update"))}e(g,a)}function d(a,b,c,d){if(d===void 0){b.hidden=!0;c.style.display="none"}else{b.hidden=!1;c.style.display="";if(a){a.replaceChild(document.createTextNode(d),a.firstChild)}}return b.hidden}function e(a,b){if(!b){p.value=n[a].value;var c=document.querySelector("[data-filetypesdescriptions=\"id_filetypeslist\"]");c.firstChild.innerHTML=q.filetype_description;var d=c.firstChild.firstChild.firstChild;d.firstChild.replaceChild(document.createTextNode(n[a].description+" "),d.firstChild.firstChild);d.lastChild.replaceChild(document.createTextNode(p.value),d.lastChild.firstChild)}}function f(){var a=document.querySelector("[data-filetypesbrowserbody=\"id_filetypeslist\"]");if(null===a||a.hasAttribute("data-used")){setTimeout(f,100)}else{a.setAttribute("data-used","true");for(var b=o.options[o.selectedIndex].value,c=0;c<a.children.length;c++){(function(){var d=a.children[c],e="";if(d.getAttribute("data-filetypesbrowserkey")!==m[b]){e="none"}else{var f=d.querySelectorAll("input[data-filetypesbrowserkey][type=\"checkbox\"]"),h=p.value.toString();h=""===h?0:h.replace(","," ").split(" ").length;var i={count:h,last:null};g(f,i);for(var k=0;k<f.length;k++){(function(){var a=f[k];a.addEventListener("change",function(){i.count+=a.checked?1:-1;g(f,i)})})()}}d.style.display=e})()}}}function g(a,b){if(1===b.count){b.last=Array.from(a).find(function(a){return a.checked})}if(b.last){b.last.disabled=1===b.count}}function h(){var a=document.querySelector("[data-filetypesbrowser=\"id_filetypeslist\"]");if(0<a.childElementCount){a.firstChild.addEventListener("click",function(){f()})}else{setTimeout(h,100)}}return{process:a}});
//# sourceMappingURL=labelchange.min.js.map
